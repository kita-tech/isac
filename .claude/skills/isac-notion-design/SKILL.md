---
name: isac-notion-design
description: Notionに記載されたシステムの概要から設計を行います。
---

# ISAC Notion Design Skill

Notionに記載されたシステムの概要から設計を行います。

## 使い方

```
/isac-notion-design [NotionページURL or ページID]
```

## 前提条件

- 環境変数 `NOTION_API_TOKEN` が設定されていること
- Notion Integrationが対象ページにアクセス権を持っていること

## 実行手順

### 1. Notionページの取得

MCPツール `mcp__notion__*` を使用してページ内容を取得します。

```
1. ページURLからページIDを抽出
2. mcp__notion__retrieve_page でページ情報を取得
3. mcp__notion__retrieve_block_children でブロック内容を取得
```

### 2. 10人のペルソナによる設計レビュー

取得した概要を元に、以下の10人のペルソナで設計を議論します：

| # | ペルソナ | 役割 | 視点 |
|---|---------|------|------|
| 1 | バックエンド開発者 | 実装担当 | 実装の容易さ、API設計、DB設計 |
| 2 | フロントエンド開発者 | UI実装担当 | コンポーネント設計、状態管理 |
| 3 | SRE/DevOps | 運用担当 | 運用負荷、監視、スケーラビリティ |
| 4 | アーキテクト | 技術リード | 全体設計、拡張性、技術的負債 |
| 5 | セキュリティエンジニア | セキュリティ担当 | 認証認可、脆弱性、データ保護 |
| 6 | プロダクトマネージャー | プロダクト責任者 | ユーザー価値、優先度、スコープ |
| 7 | UXデザイナー | UX担当 | ユーザー体験、導線、アクセシビリティ |
| 8 | QAエンジニア | 品質担当 | テスト容易性、品質基準 |
| 9 | データエンジニア | データ担当 | データフロー、分析基盤 |
| 10 | 新人エンジニア | フレッシュな視点 | 学習コスト、ドキュメント |

### 3. 議論フォーマット

各ペルソナは以下の形式で意見を述べます：

```
**[絵文字] [名前]（[役割]・[経験年数]）**
> [システム概要に対する所見・設計提案]
>
> **ポイント**: [重要な指摘]
> **提案**: [具体的な設計案]
```

### 4. 設計ドキュメント生成

議論を踏まえ、以下の構成で設計ドキュメントを出力：

```markdown
# [システム名] 設計書

## 1. 概要
- 目的
- スコープ
- 主要機能

## 2. アーキテクチャ
- システム構成図（Mermaid）
- 技術スタック
- 外部連携

## 3. データ設計
- ER図（Mermaid）
- 主要エンティティ

## 4. API設計
- エンドポイント一覧
- 認証方式

## 5. 非機能要件
- パフォーマンス
- セキュリティ
- 運用・監視

## 6. 実装計画
- フェーズ分け
- 優先度

## 7. 議論ログ
- 10人のペルソナによる議論要約
- 主要な決定事項
```

### 5. 決定の記録（オプション）

設計が完了したら、ユーザーに確認：

「この設計をMemory Serviceに記録しますか？」

**Yes の場合**、Memory Service に保存します。

## オプション

| オプション | 説明 |
|-----------|------|
| `--quick` | 3人のペルソナで簡易レビュー |
| `--full` | 10人 + 追加質問で詳細レビュー |
| `--output [path]` | 設計書の出力先を指定 |

## 例

### 入力
```
/isac-notion-design https://notion.so/myworkspace/API-Gateway-abc123
```

### 出力
```
## Notionページ取得完了

**タイトル**: API Gateway リニューアル
**内容**:
- 現行システムの課題
- 要件メモ
- ラフなアーキテクチャ案

---

## 10人のペルソナによる設計レビュー

[各ペルソナの意見...]

---

## 設計書

[生成された設計ドキュメント]
```

## 関連スキル

- `/isac-review` - 設計レビュー（Notionなしで議論）
- `/isac-decide` - 決定の記録
- `/isac-memory` - 記憶の検索・管理
